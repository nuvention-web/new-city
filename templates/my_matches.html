{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Semantic - Minimal portfolio template</title>

  <link rel="stylesheet" href="{% static 'assets/css/jquery-ui.css' %}">


  <!-- Bootstrap core CSS -->
  <link href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

  <!-- Plugins -->
  <link href="{% static 'assets/css/simpletextrotator.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/et-line-font.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/magnific-popup.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/flexslider.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/animate.css' %}" rel="stylesheet">

  <!-- Template core CSS -->
  <link href="{% static 'assets/css/style-list-roommate.css' %}" rel="stylesheet">

  <!-- Custom css -->
  <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet">
</head>
<body>

  <!-- PRELOADER -->
  <div class="page-loader">
    <div class="loader">Loading...</div>
  </div>
  <!-- /PRELOADER -->

  <!-- NAVIGATION -->
  <nav class="navbar navbar-custom navbar-transparent navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#custom-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">APT 5A</a>
        </div>

        <div class="collapse navbar-collapse" id="custom-collapse">
          <ul class="nav navbar-nav navbar-right">
            {% if user.is_authenticated %}
              <li><a href="/matches">My matches</a></li>
              <li><a href="/posts/list_roommate">Find a Roommate</a></li>
              <li><a href="/posts/list">Find a House</a></li>
              <li><a href="/profile">My Profile</a></li>
            {% else %}
              <li><a href="/login">Login</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
  </nav>
  <!-- /NAVIGATION -->

  <!-- WRAPPER -->
  <div class="wrapper">

    <!-- HOME -->
    <section class="module module-header bg-dark bg-dark-50" data-background="{% static 'assets/images/section-1.jpg' %}">

      <div class="container">

        <!-- MODULE TITLE -->
        <div class="row">

          <div class="col-sm-6 col-sm-offset-3">

            <h1 class="module-title font-alt align-center">My Matches</h1>

          </div>

        </div>
        <!-- /MODULE TITLE -->

      </div>

    </section >
    <!-- /HOME -->

    <!-- PORTFOLIO -->
    <section class="module-small p-t-20 p-b-60">

      <div class="container">

        <!-- PORTFOLIO LIST -->
        <ul id="works-grid" class="works-grid works-grid-gut works-grid-2 works-hover-w">

        <div id="output" class="output">

        <li class="work-item illustration webdesign">

        <div class="container">

        <div class="row">

          <div class="col-sm-8 col-sm-offset-2">


            <a href="portfolio-single-1.html">

            <!-- CONTENT BOXES -->

            <hr class="divider-w m-t-10 m-b-20">

            <div class="row multi-columns-row">


              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <!-- <span class="icon-camera"></span> -->
                    <img src="{% static 'assets/images/stick-figure1.jpg' %}" alt="Smiley face">
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-title font-inc font-uppercase">
                    Andrew
                  </div>
                  <div class="content-box-text" style="text-align: left;">
                    &#10004; Northwestern University <br>
                    &#10004; 4 Mutual Friends <br>
                    &#10004; Quiet, Clean, Non-Smoker <br>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <div class="content-box-title font-inc font-uppercase" style="font-size:120%; font-family: Comic Sans MS, cursive, sans-serif;">
                    93%
                  </div>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              </div>
            <!-- /CONTENT BOXES -->
            </a>

          <a href="portfolio-single-1.html">

            <!-- CONTENT BOXES -->

            <hr class="divider-w m-t-10 m-b-20">

            <div class="row multi-columns-row">


              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <!-- <span class="icon-camera"></span> -->
                    <img src="{% static 'assets/images/stick-figure1.jpg' %}" alt="Smiley face">
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-title font-inc font-uppercase">
                    Chris
                  </div>
                  <div class="content-box-text" style="text-align: left;">
                    &#10004; From Miami, FL <br>
                    &#10004; 2 Mutual Friends <br>
                    &#10004; Quiet, Night-Owl, Non-Smoker <br>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <div class="content-box-title font-inc font-uppercase" style="font-size:120%; font-family: Comic Sans MS, cursive, sans-serif;">
                    89%
                  </div>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              </div>
            <!-- /CONTENT BOXES -->
            </a>

            <a href="portfolio-single-1.html">

            <!-- CONTENT BOXES -->

            <hr class="divider-w m-t-10 m-b-20">

            <div class="row multi-columns-row">


              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <!-- <span class="icon-camera"></span> -->
                    <img src="{% static 'assets/images/stick-figure1.jpg' %}" alt="Smiley face">
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-title font-inc font-uppercase">
                    Andrew
                  </div>
                  <div class="content-box-text" style="text-align: left;">
                    &#10004; Student <br>
                    &#10004; 2 Mutual Friends <br>
                    &#10004; Night-Owl, Organized <br>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              <!-- CONTENT BOX -->
              <div class="col-sm-6 col-md-4 col-lg-4">
                <div class="content-box">
                  <div class="content-box-icon">
                    <div class="content-box-title font-inc font-uppercase" style="font-size:120%; font-family: Comic Sans MS, cursive, sans-serif;">
                    84%
                  </div>
                  </div>
                </div>
              </div>
              <!-- /CONTENT BOX -->

              </div>
            <!-- /CONTENT BOXES -->
            </a>
        </div>

      </div>
      </li>


          </div>

          <!-- PORTFOLIO ITEM -->
          <!-- <li class="work-item marketing webdesign">
            <a href="portfolio-single-1.html">
              <div class="work-image">
                <img src="{% static 'assets/images/work-6.jpg' %}" alt="">
              </div>
              <div class="work-caption">
                <h3 class="work-title font-alt">Business Cards in paper clip</h3>
                <div class="work-descr font-inc">
                  Marketing
                </div>
              </div>
            </a>
          </li> -->
          <!-- /PORTFOLIO ITEM -->
        </ul>
        <!-- /PORTFOLIO LIST -->

      </div>

    </section>
    <!-- /PORTFOLIO -->

    <!-- PAGINATION -->
    <!-- <section class="module-small p-t-0">

      <div class="container">

        <div class="pagination font-inc text-uppercase">

          <a href="#"><i class="fa fa-angle-left"></i> Prev</a>
          <a href="#">Next <i class="fa fa-angle-right"></i></a>

        </div>

      </div>

    </section> -->
    <!-- /PAGINATION -->

    <!-- DIVIDER -->
    <hr class="divider-w">
    <!-- /DIVIDER -->

    <!-- CONTACT -->
    <section class="module-small">

      <div class="container">

        <div class="row">

          <!-- CONTENT BOX -->
          <div class="col-sm-4">
            <div class="content-box">
              <div class="content-box-icon">
                <span class="icon-map-pin"></span>
              </div>
              <div class="content-box-title font-inc">
                007 Steet, City, USA
              </div>
            </div>
          </div>
          <!-- /CONTENT BOX -->

          <!-- CONTENT BOX -->
          <div class="col-sm-4">
            <div class="content-box">
              <div class="content-box-icon">
                <span class="icon-phone"></span>
              </div>
              <div class="content-box-title font-inc">
                +1 234 567 89 00
              </div>
            </div>
          </div>
          <!-- /CONTENT BOX -->

          <!-- CONTENT BOX -->
          <div class="col-sm-4">
            <div class="content-box">
              <div class="content-box-icon">
                <span class="icon-envelope"></span>
              </div>
              <div class="content-box-title font-inc">
                semantic@email.com
              </div>
            </div>
          </div>
          <!-- /CONTENT BOX -->

        </div>

      </div>

    </section>
    <!-- /CONTACT -->

    <!-- FOOTER -->
    <footer class="footer">

      <div class="container">

        <div class="row">

          <div class="col-sm-12 text-center">
            <p class="copyright font-inc m-b-0">Â© 2015 <a href="index.html">SEMANTIC</a>, All Rights Reserved.</p>
          </div>

        </div>

      </div>

    </footer>
    <!-- /FOOTER -->

  </div>
  <!-- /WRAPPER -->

  <!-- Scroll-up -->
  <div class="scroll-up">
    <a href="#totop"><i class="fa fa-angle-double-up' %}"></i></a>
  </div>

  <!-- Javascript files -->
  <script src="{% static 'assets/js/jquery-2.1.3.min.js' %}"></script>
  <script src="{% static 'assets/bootstrap/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/js/jquery.mb.YTPlayer.min.js' %}"></script>
  <script src="{% static 'assets/js/appear.js' %}"></script>
  <script src="{% static 'assets/js/jquery.simple-text-rotator.min.js' %}"></script>
  <script src="{% static 'assets/js/jqBootstrapValidation.js' %}"></script>
  <script src="http://maps.google.com/maps/api/js?sensor=true' %}"></script>
  <script src="{% static 'assets/js/gmaps.js' %}"></script>
  <script src="{% static 'assets/js/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'assets/js/imagesloaded.pkgd.js' %}"></script>
  <script src="{% static 'assets/js/jquery.flexslider-min.js' %}"></script>
  <script src="{% static 'assets/js/jquery.magnific-popup.min.js' %}"></script>
  <script src="{% static 'assets/js/jquery.fitvids.js' %}"></script>
  <script src="{% static 'assets/js/smoothscroll.js' %}"></script>
  <script src="{% static 'assets/js/wow.min.js' %}"></script>
  <script src="{% static 'assets/js/contact.js' %}"></script>
  <script src="{% static 'assets/js/custom.js' %}"></script>
  <script src="{% static 'assets/js/jquery-1.11.1.js' %}"></script>
  <script src="{% static 'assets/js/jquery-ui-1.11.4.js' %}"></script>

     <script>

    $(function() {
    $("#budget-range").slider({
      range: true,
      min: 0,
      max: 5000,
      step: 100,
      values: [ 0, 5000 ],
      slide: function( event, ui )  {
        $("#amount-budget").val("$" + ui.values[0] + " - $" + ui.values[1]);
      },
      stop: function(event, ui) {
        filter_roommate()
      }
    });
    $("#amount-budget").val("$" + $("#budget-range").slider("values", 0) + " - $" + $("#budget-range").slider("values", 1));
  });

    $(function() {
    $("#age-range").slider({
      range: true,
      min: 0,
      max: 100,
      step: 1,
      values: [ 0, 100 ],
      slide: function( event, ui )  {
        $("#text-age").val(ui.values[0] + " - " + ui.values[1]);
      },
      stop: function(event, ui) {
        filter_roommate()
      }
    });
    $("#text-age").val($("#age-range").slider("values", 0) + " - " + $("#age-range").slider("values", 1));
  });

    // $('.gender-class').on('submit', function(event){
    $(".gender-class").click(function(event){
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $(".filter-relationship").click(function(event){
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $(".filter-tag").click(function(event){
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $("#filter-hometown-form").on('submit', function(event){
        event.preventDefault();
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $("#filter-school-form").on('submit', function(event){
        event.preventDefault();
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $("#filter-job-form").on('submit', function(event){
        event.preventDefault();
        console.log("form submitted!")  // sanity check
        filter_roommate();
    });

    $("#reset-form").on('submit', function(event){
        // event.preventDefault();
        location.reload()
    });

    function filter_roommate() {
    console.log("filter_roommate is working!") // sanity check
    var budget = $("#budget-range").slider( "option", "values" )
    var age = $("#age-range").slider("option", "values")
    var gender_selected = []
    var relationship_selected = [];
    var filter_selected = [];
    $('#div-gender input:checked').each(function() {
      gender_selected.push($(this).val());
    });
    $('#div-relationship input:checked').each(function() {
      relationship_selected.push($(this).val());
    });

    $('#div-tag input:checked').each(function() {
      filter_selected.push($(this).val());
    });

    $.ajax({
        url : window.location.pathname,
        //"/posts/list_roommate/San%20Francisco"
        type : "GET", // http method
        // data : { gender : $('#filter-gender').val()
        data : { gender : gender_selected,
               hometown: $("#text-hometown").val(),
               school: $("#text-school").val(),
               job: $("#text-job").val(),
               budget_low: budget[0],
               budget_high: budget[1],
               age_low: age[0],
               age_high: age[1],
               relationship_status: relationship_selected,
               filter_selected: filter_selected,
                }, // data sent with the post request

        // handle a successful response
        success : function(json) {
            // $('#filter-gender').val(''); // remove the value from the input
            console.log(json); // log the returned json to the console
            console.log("success"); // another sanity check
            // $(document).ajaxStop(function() { location.reload(true); });
            // window.location.reload(json)
            var raw_html = document.createElement('html')
            raw_html.innerHTML = json
            // var output = raw_html.firstChild;
            var output = raw_html.getElementsByClassName("output")[0]
            $(".output").html(output)
            // .html(json)
            },

        // handle a non-successful response
        error : function(xhr,errmsg,err) {
            $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
            console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
  </script>

</body>
</html>

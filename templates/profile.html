<!DOCTYPE html>
<html>
<head>
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>
<body>
    {% block body %}
    {% block content %}

    <h1>{{user.first_name}}</h1>

    {% for account in user.socialaccount_set.all %}
        <div id= "profile-picture" st>
            <img style= "border-radius: 50px"width="300" height="300" src="{{ account.get_avatar_url }}" />
        </div>
        <h3><div id="profile-name">{{ account.extra_data.name }}</div></h3>
        <h3><div id="profile-email">{{ account.extra_data.email }}</div></h3>
        <h3><div id="profile-gender">{{ account.extra_data.gender }}</div></h3>

        {% for friend in account.extra_data.friends.data %}
        <h3><div id="profile-friends">
            <div id="profile-friend">{{friend.name}}</div>
        </div></h3>
        {% endfor %}

         <h3><div>Total FB friends count: {{account.extra_data.friends.summary.total_count}}</div></h3>
    {% endfor %}


    {% endblock content %}
    {% endblock body %}

    {% if user.is_authenticated %}
    <a href="/accounts/logout">Logout</a>
    {% endif %}

    <script>
    $(document).ready(function(){
        makeUserProfile();

    })

    function makeUserProfile(){
        var name = $("#profile-name").html()
        var email = $("#profile-email").html()
        var gender = $("#profile-gender").html()
        // var friends = $("#profile-friend").html()
        var request = $.ajax({
            method: "POST",
            url: "/posts/create_user_profile/",
            data: {
                'name' : name,
                'email' : email,
                'gender' : gender,
                'csrfmiddlewaretoken': '{{ csrf_token }}',
            },
            dataType: "JSON"
        })

        request.done(function(msg){
            console.log(msg)
        })

        request.fail(function(jqXHR, textStatus){
            alert( "Request failed: " + textStatus );
        })


    }

    </script>
</body>
</html>





<!-- Get Friends list,
     Search database to find user with same name,
     Make Friendship instance -->